{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"E:/Desktop/ylylxt/manage_code/node_modules/@babel/runtime/helpers/interopRequireDefault.js\")[\"default\"];\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nrequire(\"core-js/modules/es.regexp.exec.js\");\nrequire(\"core-js/modules/es.string.replace.js\");\nrequire(\"core-js/modules/es.array.push.js\");\nrequire(\"core-js/modules/es.object.define-property.js\");\nvar _axios = _interopRequireDefault(require(\"axios\"));\nvar _elementPlus = require(\"element-plus\");\nvar _vue = require(\"vue\");\nvar _vuex = require(\"vuex\");\nvar _vueRouter = require(\"vue-router\");\nvar _default = {\n  __name: 'indexTop',\n  props: {\n    collapse: Boolean\n  },\n  emits: ['collapseChange'],\n  setup: function setup(__props, _ref) {\n    var _getCurrentInstance;\n    var expose = _ref.expose,\n      emit = _ref.emit;\n    expose();\n    var props = __props;\n    var store = (0, _vuex.useStore)();\n    var _toRefs = (0, _vue.toRefs)(props),\n      collapse = _toRefs.collapse;\n    var router = (0, _vueRouter.useRouter)();\n    var context = (_getCurrentInstance = (0, _vue.getCurrentInstance)()) === null || _getCurrentInstance === void 0 ? void 0 : _getCurrentInstance.appContext.config.globalProperties;\n    var role = context === null || context === void 0 ? void 0 : context.$toolUtil.storageGet('sessionTable');\n    var roleName = context === null || context === void 0 ? void 0 : context.$toolUtil.storageGet('role');\n    var toggleClick = function toggleClick() {\n      emit('collapseChange');\n    };\n    var getSession = function getSession() {\n      context === null || context === void 0 ? void 0 : context.$http({\n        url: \"\".concat(context === null || context === void 0 ? void 0 : context.$toolUtil.storageGet('sessionTable'), \"/session\"),\n        method: 'get'\n      }).then(function (res) {\n        context === null || context === void 0 ? void 0 : context.$toolUtil.storageSet('userid', res.data.data.id);\n      });\n    };\n    // 退出登录\n    var onLogout = function onLogout() {\n      var toolUtil = context === null || context === void 0 ? void 0 : context.$toolUtil;\n      store.dispatch('delAllCachedViews');\n      store.dispatch('delAllVisitedViews');\n      toolUtil.storageClear();\n      router.replace({\n        name: \"login\"\n      });\n    };\n    // 个人中心\n    var centerClick = function centerClick() {\n      router.push(\"/\".concat(role, \"Center\"));\n    };\n    // 修改密码\n    var updatepasswordClick = function updatepasswordClick() {\n      router.push(\"/updatepassword\");\n    };\n    getSession();\n    var __returned__ = {\n      store: store,\n      props: props,\n      collapse: collapse,\n      router: router,\n      context: context,\n      emit: emit,\n      role: role,\n      roleName: roleName,\n      toggleClick: toggleClick,\n      getSession: getSession,\n      onLogout: onLogout,\n      centerClick: centerClick,\n      updatepasswordClick: updatepasswordClick,\n      get axios() {\n        return _axios[\"default\"];\n      },\n      get ElMessageBox() {\n        return _elementPlus.ElMessageBox;\n      },\n      toRefs: _vue.toRefs,\n      getCurrentInstance: _vue.getCurrentInstance,\n      ref: _vue.ref,\n      onBeforeUnmount: _vue.onBeforeUnmount,\n      get useStore() {\n        return _vuex.useStore;\n      },\n      get useRouter() {\n        return _vueRouter.useRouter;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};\nexports[\"default\"] = _default;","map":{"version":3,"mappings":";;;;;;;;;;;AAwCC;AACA;AAGA;AAOA;AAEA;AAEoB;;;;;;;;;;;;IAHpB,IAAMA,KAAK,GAAG,kBAAQ,GAAE;IAOxB,cAGI,eAAM,EAACC,KAAK,CAAC;MAFhBC,QAAQ,WAARA,QAAQ;IAIT,IAAMC,MAAM,GAAG,wBAAS,GAAE;IAC1B,IAAMC,OAAO,0BAAG,2BAAkB,GAAE,wDAApB,oBAAsBC,UAAU,CAACC,MAAM,CAACC,gBAAgB;IAExE,IAAMC,IAAI,GAAGJ,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEK,SAAS,CAACC,UAAU,CAAC,cAAc,CAAC;IAC1D,IAAMC,QAAQ,GAAGP,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEK,SAAS,CAACC,UAAU,CAAC,MAAM,CAAC;IACtD,IAAME,WAAW,GAAG,SAAdA,WAAW,GAAS;MACzBC,IAAI,CAAC,gBAAgB,CAAC;IACvB,CAAC;IACD,IAAMC,UAAU,GAAG,SAAbA,UAAU,GAAS;MACxBV,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEW,KAAK,CAAC;QACdC,GAAG,YAAKZ,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEK,SAAS,CAACC,UAAU,CAAC,cAAc,CAAC,aAAU;QAC/DO,MAAM,EAAE;MACT,CAAC,CAAC,CAACC,IAAI,CAAC,aAAG,EAAE;QACZd,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEK,SAAS,CAACU,UAAU,CAAC,QAAQ,EAACC,GAAG,CAACC,IAAI,CAACA,IAAI,CAACC,EAAE,CAAC;MACzD,CAAC,CAAC;IACH,CAAC;IACD;IACA,IAAMC,QAAQ,GAAG,SAAXA,QAAQ,GAAS;MACtB,IAAIC,QAAQ,GAAGpB,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEK,SAAS;MACjCT,KAAK,CAACyB,QAAQ,CAAC,mBAAmB,CAAC;MACnCzB,KAAK,CAACyB,QAAQ,CAAC,oBAAoB,CAAC;MACpCD,QAAQ,CAACE,YAAY,EAAE;MACvBvB,MAAM,CAACwB,OAAO,CAAC;QACdC,IAAI,EAAE;MACP,CAAC,CAAC;IACH,CAAC;IACD;IACA,IAAMC,WAAW,GAAG,SAAdA,WAAW,GAAS;MACzB1B,MAAM,CAAC2B,IAAI,YAAKtB,IAAI,YAAS;IAC9B,CAAC;IACD;IACA,IAAMuB,mBAAmB,GAAG,SAAtBA,mBAAmB,GAAS;MACjC5B,MAAM,CAAC2B,IAAI,mBAAmB;IAC/B,CAAC;IACDhB,UAAU,EAAE","names":["store","props","collapse","router","context","appContext","config","globalProperties","role","$toolUtil","storageGet","roleName","toggleClick","emit","getSession","$http","url","method","then","storageSet","res","data","id","onLogout","toolUtil","dispatch","storageClear","replace","name","centerClick","push","updatepasswordClick"],"sources":["E:/Desktop/ylylxt/manage_code/src/components/index/indexTop.vue"],"sourcesContent":["<template>\r\n\t<div class=\"top_view\">\r\n\t\t<div class=\"top_left_view\">\r\n\t\t\t<div class=\"fold_view\" @click=\"toggleClick\">\r\n\t\t\t\t<el-icon class=\"icons\">\r\n\t\t\t\t\t<Fold v-if=\"!collapse\" />\r\n\t\t\t\t\t<Expand v-else />\r\n\t\t\t\t</el-icon>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"projectTitle\">社区智慧医疗养老系统</div>\r\n\t\t<div class=\"top_right_view\">\r\n\t\t\t<el-dropdown class=\"avatar-container right-menu-item\" trigger=\"hover\">\r\n\t\t\t\t<div class=\"avatar-wrapper\">\r\n\t\t\t\t\t<div class=\"nickname\">欢迎 {{$toolUtil.storageGet('adminName')}}</div>\r\n\t\t\t\t\t<img class=\"user-avatar\" src=\"@/assets/img/avatar.png\">\r\n\t\t\t\t\t<el-icon class=\"el-icon--right\">\r\n\t\t\t\t\t\t<arrow-down />\r\n\t\t\t\t\t</el-icon>\r\n\t\t\t\t</div>\r\n\t\t\t\t<template #dropdown>\r\n\t\t\t\t\t<el-dropdown-menu slot=\"dropdown\">\r\n\t\t\t\t\t\t<el-dropdown-item @click=\"centerClick\" v-if=\"roleName!='管理员'\">\r\n\t\t\t\t\t\t\t个人中心\r\n\t\t\t\t\t\t</el-dropdown-item>\r\n\t\t\t\t\t\t<el-dropdown-item @click=\"updatepasswordClick\">\r\n\t\t\t\t\t\t\t修改密码\r\n\t\t\t\t\t\t</el-dropdown-item>\r\n\t\t\t\t\t\t<el-dropdown-item>\r\n\t\t\t\t\t\t\t<span style=\"display:block;\" @click=\"onLogout\">退出登录</span>\r\n\t\t\t\t\t\t</el-dropdown-item>\r\n\t\t\t\t\t</el-dropdown-menu>\r\n\t\t\t\t</template>\r\n\t\t\t</el-dropdown>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script setup>\r\n\timport axios from 'axios'\r\n\timport {\r\n\t\tElMessageBox\r\n\t} from 'element-plus'\r\n\timport {\r\n\t\ttoRefs,\r\n\t\tdefineEmits,\r\n\t\tgetCurrentInstance,\r\n\t\tref,\r\n\t\tonBeforeUnmount\r\n\t} from 'vue';\r\n\timport { useStore } from 'vuex'\r\n\tconst store = useStore()\r\n\timport {\r\n\t\tuseRouter\r\n\t} from 'vue-router';\r\n\tconst props = defineProps({\r\n\t\tcollapse: Boolean\r\n\t})\r\n\tconst {\r\n\t\tcollapse,\r\n\t\t\r\n\t} = toRefs(props)\r\n\t\r\n\tconst router = useRouter()\r\n\tconst context = getCurrentInstance()?.appContext.config.globalProperties;\r\n\tconst emit = defineEmits(['collapseChange'])\r\n\tconst role = context?.$toolUtil.storageGet('sessionTable')\r\n\tconst roleName = context?.$toolUtil.storageGet('role')\r\n\tconst toggleClick = () => {\r\n\t\temit('collapseChange')\r\n\t}\r\n\tconst getSession = () => {\r\n\t\tcontext?.$http({\r\n\t\t\turl: `${context?.$toolUtil.storageGet('sessionTable')}/session`,\r\n\t\t\tmethod: 'get'\r\n\t\t}).then(res=>{\r\n\t\t\tcontext?.$toolUtil.storageSet('userid',res.data.data.id)\r\n\t\t})\r\n\t}\r\n\t// 退出登录\r\n\tconst onLogout = () => {\r\n\t\tlet toolUtil = context?.$toolUtil\r\n\t\tstore.dispatch('delAllCachedViews')\r\n\t\tstore.dispatch('delAllVisitedViews')\r\n\t\ttoolUtil.storageClear()\r\n\t\trouter.replace({\r\n\t\t\tname: \"login\"\r\n\t\t});\r\n\t}\r\n\t// 个人中心\r\n\tconst centerClick = () => {\r\n\t\trouter.push(`/${role}Center`)\r\n\t}\r\n\t// 修改密码\r\n\tconst updatepasswordClick = () => {\r\n\t\trouter.push(`/updatepassword`)\r\n\t}\r\n\tgetSession()\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t// 总盒子\r\n\t.top_view {\r\n\t\tpadding: 0;\r\n\t\tz-index: 9;\r\n\t\tdisplay: flex;\r\n\t\tborder-color: #990033;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\tbackground: linear-gradient(276deg, rgba(255,207,179,1) 0%, rgba(255,250,246,1) 99%);\r\n\t\twidth: 100%;\r\n\t\tjustify-content: flex-start;\r\n\t\tborder-width: 0 0 0px;\r\n\t\talign-items: center;\r\n\t\tposition: fixed;\r\n\t\tborder-style: solid;\r\n\t\theight: 60px;\r\n\t\t// 左边盒子\r\n\t\t.top_left_view {\r\n\t\t\tdisplay: flex;\r\n\t\t\twidth: auto;\r\n\t\t\talign-items: center;\r\n\t\t\theight: 100%;\r\n\t\t\t// 折叠按钮盒子\r\n\t\t\t.fold_view {\r\n\t\t\t\tpadding: 0 15px;\r\n\t\t\t\tdisplay: none;\r\n\t\t\t\t// 图标\r\n\t\t\t\t.icons {\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t// 标题\r\n\t\t.projectTitle{\r\n\t\t\tpadding: 0 20px;\r\n\t\t\tmargin: 0 0 0 20px;\r\n\t\t\tcolor: #000;\r\n\t\t\tfont-weight: 500;\r\n\t\t\twidth: auto;\r\n\t\t\tfont-size: 22px;\r\n\t\t\tline-height: 1;\r\n\t\t}\r\n\t\t// 右部盒子\r\n\t\t.top_right_view{\r\n\t\t\ttop: 5px;\r\n\t\t\tdisplay: flex;\r\n\t\t\twidth: auto;\r\n\t\t\tjustify-content: flex-end;\r\n\t\t\tposition: absolute;\r\n\t\t\tright: 10px;\r\n\t\t\theight: 100%;\r\n\t\t\torder: 3;\r\n\t\t\t// 头像盒子\r\n\t\t\t.avatar-container {\r\n\t\t\t\tcursor: pointer;\r\n\t\t\t\tmargin: 0 30px 0 0;\r\n\t\t\t\tcolor: #fff;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\theight: 40px;\r\n\t\t\t\t.avatar-wrapper {\r\n\t\t\t\t\tmargin: 5px 0 0;\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\tposition: relative;\r\n\t\t\t\t\talign-items: center;\r\n\t\t\t\t\t// 昵称\r\n\t\t\t\t\t.nickname {\r\n\t\t\t\t\t\tcursor: pointer;\r\n\t\t\t\t\t\tmargin: 0 10px 0 0;\r\n\t\t\t\t\t\tcolor: #666;\r\n\t\t\t\t\t\tline-height: 44px;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// 头像\r\n\t\t\t\t\t.user-avatar {\r\n\t\t\t\t\t\tcursor: pointer;\r\n\t\t\t\t\t\tborder-radius: 100%;\r\n\t\t\t\t\t\tmargin: 0 4px 0 0;\r\n\t\t\t\t\t\twidth: 36px;\r\n\t\t\t\t\t\theight: 36px;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// 图标\r\n\t\t\t\t\t.el-icon--right {\r\n\t\t\t\t\t\tcolor: #666;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t// 下拉盒子\r\n\t.el-dropdown-menu{\r\n\t\tbackground: #fff;\r\n\t\tmin-width: 100px;\r\n\t\t// 下拉盒子itme\r\n\t\t:deep(.el-dropdown-menu__item){\r\n\t\t\tcolor: #555;\r\n\t\t\tbackground: none;\r\n\t\t}\r\n\t\t// item悬浮\r\n\t\t:deep(.el-dropdown-menu__item:hover){\r\n\t\t\tcolor: #fff;\r\n\t\t\tbackground: #654B3C;\r\n\t\t}\r\n\t}\r\n\t\r\n</style>\r\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}