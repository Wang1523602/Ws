{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nrequire(\"core-js/modules/es.json.stringify.js\");\nrequire(\"core-js/modules/es.object.define-property.js\");\nvar _vue = require(\"vue\");\nvar _default = {\n  __name: 'approval',\n  props: {\n    tableName: String\n  },\n  emits: ['shChange'],\n  setup: function setup(__props, _ref) {\n    var _getCurrentInstance;\n    var expose = _ref.expose,\n      emit = _ref.emit;\n    var props = __props;\n    var context = (_getCurrentInstance = (0, _vue.getCurrentInstance)()) === null || _getCurrentInstance === void 0 ? void 0 : _getCurrentInstance.appContext.config.globalProperties;\n    //props\n\n    var _toRefs = (0, _vue.toRefs)(props),\n      tableName = _toRefs.tableName;\n    //props\n\n    var rules = (0, _vue.ref)({\n      shhf: [{\n        required: true,\n        message: '请输入审核回复',\n        trigger: 'blur'\n      }]\n    });\n    var approvalForm = (0, _vue.ref)({});\n    var approvalVisible = (0, _vue.ref)(false);\n    //ref\n    var ruleFormRef = (0, _vue.ref)(null);\n    var sfshType = (0, _vue.ref)(1);\n    var approvalClick = function approvalClick(row) {\n      var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      sfshType.value = type;\n      approvalForm.value = JSON.parse(JSON.stringify(row));\n      approvalVisible.value = true;\n    };\n\n    //声明父级调用\n    expose({\n      approvalClick: approvalClick\n    });\n    var approvalSave = function approvalSave(type) {\n      if (sfshType.value == 1) {\n        approvalForm.value.sfsh = type;\n      }\n      ruleFormRef.value.validate(function (valid) {\n        if (valid) {\n          var url = \"\".concat(tableName.value, \"/update\");\n          context === null || context === void 0 ? void 0 : context.$http({\n            url: url,\n            method: 'post',\n            data: approvalForm.value\n          }).then(function (res) {\n            context === null || context === void 0 ? void 0 : context.$toolUtil.message('审核成功', 'success', function (obj) {\n              approvalVisible.value = false;\n            });\n            emit('shChange', type, approvalForm.value);\n          });\n        }\n      });\n    };\n    var __returned__ = {\n      emit: emit,\n      context: context,\n      props: props,\n      tableName: tableName,\n      rules: rules,\n      approvalForm: approvalForm,\n      approvalVisible: approvalVisible,\n      ruleFormRef: ruleFormRef,\n      sfshType: sfshType,\n      approvalClick: approvalClick,\n      approvalSave: approvalSave,\n      ref: _vue.ref,\n      toRefs: _vue.toRefs,\n      getCurrentInstance: _vue.getCurrentInstance\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};\nexports[\"default\"] = _default;","map":{"version":3,"mappings":";;;;;;;;AAgCC;AAKa;;;;;;;;;;;IAEb,IAAMA,OAAO,0BAAG,2BAAkB,GAAE,wDAApB,oBAAsBC,UAAU,CAACC,MAAM,CAACC,gBAAgB;IACxE;;IAIA,cAEI,eAAM,EAACC,KAAK,CAAC;MADhBC,SAAS,WAATA,SAAS;IAEV;;IAEA,IAAMC,KAAK,GAAG,YAAG,EAAC;MACjBC,IAAI,EAAE,CAAC;QACNC,QAAQ,EAAE,IAAI;QACdC,OAAO,EAAE,SAAS;QAClBC,OAAO,EAAE;MACV,CAAC;IACF,CAAC,CAAC;IACF,IAAMC,YAAY,GAAG,YAAG,EAAC,CAAC,CAAC,CAAC;IAC5B,IAAMC,eAAe,GAAG,YAAG,EAAC,KAAK,CAAC;IAClC;IACA,IAAMC,WAAW,GAAG,YAAG,EAAC,IAAI,CAAC;IAC7B,IAAMC,QAAQ,GAAG,YAAG,EAAC,CAAC,CAAC;IAEvB,IAAMC,aAAa,GAAG,SAAhBA,aAAa,CAAIC,GAAG,EAAY;MAAA,IAAXC,IAAI,uEAAC,CAAC;MAChCH,QAAQ,CAACI,KAAK,GAAGD,IAAI;MACrBN,YAAY,CAACO,KAAK,GAAGC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,SAAS,CAACL,GAAG,CAAC,CAAC;MACpDJ,eAAe,CAACM,KAAK,GAAG,IAAI;IAC7B,CAAC;;IAED;IACAI,MAAY,CAAC;MACZP,aAAa,EAAbA;IACD,CAAC,CAAC;IACF,IAAMQ,YAAY,GAAG,SAAfA,YAAY,CAAIN,IAAI,EAAK;MAC9B,IAAGH,QAAQ,CAACI,KAAK,IAAI,CAAC,EAAC;QACtBP,YAAY,CAACO,KAAK,CAACM,IAAI,GAAGP,IAAI;MAC/B;MACAJ,WAAW,CAACK,KAAK,CAACO,QAAQ,CAAC,UAACC,KAAK,EAAK;QACrC,IAAIA,KAAK,EAAE;UACV,IAAIC,GAAG,aAAMtB,SAAS,CAACa,KAAK,YAAS;UACrClB,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAE4B,KAAK,CAAC;YACdD,GAAG,EAAEA,GAAG;YACRE,MAAM,EAAE,MAAM;YACdC,IAAI,EAAEnB,YAAY,CAACO;UACpB,CAAC,CAAC,CAACa,IAAI,CAAC,aAAG,EAAI;YAEd/B,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEgC,SAAS,CAACvB,OAAO,CAAC,MAAM,EAAE,SAAS,EAAE,aAAG,EAAI;cACpDG,eAAe,CAACM,KAAK,GAAG,KAAK;YAC9B,CAAC,CAAC;YACFe,IAAI,CAAC,UAAU,EAAChB,IAAI,EAACN,YAAY,CAACO,KAAK,CAAC;UACzC,CAAC,CAAC;QACH;MACD,CAAC,CAAC;IACH,CAAC","names":["context","appContext","config","globalProperties","props","tableName","rules","shhf","required","message","trigger","approvalForm","approvalVisible","ruleFormRef","sfshType","approvalClick","row","type","value","JSON","parse","stringify","expose","approvalSave","sfsh","validate","valid","url","$http","method","data","then","$toolUtil","emit"],"sources":["D:/桌面文件/ylylxt/manage_code/src/components/common/approval.vue"],"sourcesContent":["<template>\r\n\t<div>\r\n\t\t<el-dialog v-model=\"approvalVisible\" :title=\"'审核'\" width=\"70%\" destroy-on-close>\r\n\t\t\t<el-form ref=\"ruleFormRef\" :model=\"approvalForm\" label-width=\"120px\" :rules=\"rules\">\r\n\t\t\t\t<el-row>\r\n\t\t\t\t\t<el-col :span=\"24\">\r\n\t\t\t\t\t\t<el-form-item label=\"审核回复\" prop=\"shhf\">\r\n\t\t\t\t\t\t\t<el-input v-model=\"approvalForm.shhf\" type=\"textarea\" />\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\r\n\t\t\t\t</el-row>\r\n\t\t\t</el-form>\r\n\t\t\t<template #footer>\r\n\t\t\t\t<span class=\"dialog-footer\" v-if=\"sfshType==1\">\r\n\t\t\t\t\t<el-button type=\"danger\" @click=\"approvalSave('否')\">拒绝</el-button>\r\n\t\t\t\t\t<el-button type=\"primary\" @click=\"approvalSave('是')\">\r\n\t\t\t\t\t\t通过\r\n\t\t\t\t\t</el-button>\r\n\t\t\t\t</span>\r\n\t\t\t\t<span class=\"dialog-footer\" v-if=\"sfshType==2\">\r\n\t\t\t\t\t<el-button type=\"danger\" @click=\"approvalVisible=false\">取消</el-button>\r\n\t\t\t\t\t<el-button type=\"primary\" @click=\"approvalSave()\">\r\n\t\t\t\t\t\t回复\r\n\t\t\t\t\t</el-button>\r\n\t\t\t\t</span>\r\n\t\t\t</template>\r\n\t\t</el-dialog>\r\n\t</div>\r\n</template>\r\n\r\n<script setup>\r\n\timport {\r\n\t\tref,\r\n\t\ttoRefs,\r\n\t\tgetCurrentInstance,\r\n\t\tdefineEmits\r\n\t} from 'vue';\r\n\tconst emit = defineEmits(['shChange'])\r\n\tconst context = getCurrentInstance()?.appContext.config.globalProperties;\r\n\t//props\r\n\tconst props = defineProps({\r\n\t\ttableName: String\r\n\t})\r\n\tconst {\r\n\t\ttableName\r\n\t} = toRefs(props)\r\n\t//props\r\n\r\n\tconst rules = ref({\r\n\t\tshhf: [{\r\n\t\t\trequired: true,\r\n\t\t\tmessage: '请输入审核回复',\r\n\t\t\ttrigger: 'blur'\r\n\t\t}, ],\r\n\t})\r\n\tconst approvalForm = ref({})\r\n\tconst approvalVisible = ref(false)\r\n\t//ref\r\n\tconst ruleFormRef = ref(null)\r\n\tconst sfshType = ref(1)\r\n\r\n\tconst approvalClick = (row,type=1) => {\r\n\t\tsfshType.value = type\r\n\t\tapprovalForm.value = JSON.parse(JSON.stringify(row))\r\n\t\tapprovalVisible.value = true\r\n\t}\r\n\r\n\t//声明父级调用\r\n\tdefineExpose({\r\n\t\tapprovalClick\r\n\t})\r\n\tconst approvalSave = (type) => {\r\n\t\tif(sfshType.value == 1){\r\n\t\t\tapprovalForm.value.sfsh = type\r\n\t\t}\r\n\t\truleFormRef.value.validate((valid) => {\r\n\t\t\tif (valid) {\r\n\t\t\t\tlet url = `${tableName.value}/update`\r\n\t\t\t\tcontext?.$http({\r\n\t\t\t\t\turl: url,\r\n\t\t\t\t\tmethod: 'post',\r\n\t\t\t\t\tdata: approvalForm.value\r\n\t\t\t\t}).then(res => {\r\n\r\n\t\t\t\t\tcontext?.$toolUtil.message('审核成功', 'success', obj => {\r\n\t\t\t\t\t\tapprovalVisible.value = false\r\n\t\t\t\t\t})\r\n\t\t\t\t\temit('shChange',type,approvalForm.value)\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n</script>\r\n\r\n<style>\r\n</style>\r\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}